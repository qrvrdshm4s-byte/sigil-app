hash update
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Daily Sigil Planner</title>

<style>
:root{
  --bg1:#0b0612;
  --bg2:#1a1030;
  --card:rgba(255,255,255,0.06);
  --text:rgba(255,255,255,0.92);
  --muted:rgba(255,255,255,0.7);
  --accent:#b79cff;
  --border:rgba(255,255,255,0.12);
}

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 800px at 20% 10%, rgba(183,156,255,0.25), transparent 60%),
    radial-gradient(900px 700px at 80% 30%, rgba(126,240,214,0.18), transparent 55%),
    linear-gradient(160deg,var(--bg1),var(--bg2));
}

.wrap{
  max-width:900px;
  margin:0 auto;
  padding:16px;
}

h1{
  margin:8px 0 6px;
  font-size:22px;
}

.sub{
  color:var(--muted);
  font-size:14px;
  margin-bottom:12px;
}

.grid{
  display:grid;
  gap:12px;
}

@media(min-width:800px){
  .grid{grid-template-columns:1.1fr 0.9fr;}
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:14px;
  backdrop-filter:blur(10px);
}

label{
  display:block;
  font-size:13px;
  color:var(--muted);
  margin:10px 0 6px;
}

input,textarea,select{
  width:100%;
  border-radius:12px;
  border:1px solid var(--border);
  background:rgba(0,0,0,0.35);
  color:var(--text);
  padding:10px;
  font-size:14px;
}

textarea{min-height:110px;}

.row{
  display:grid;
  gap:10px;
}

@media(min-width:500px){
  .row{grid-template-columns:1fr 1fr;}
}

.btns{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:12px;
}

button{
  border-radius:12px;
  border:1px solid var(--border);
  background:rgba(0,0,0,0.25);
  color:var(--text);
  padding:10px 14px;
  cursor:pointer;
}

button:hover{border-color:var(--accent);}
.primary{
  background:rgba(183,156,255,0.18);
  border-color:rgba(183,156,255,0.6);
}

canvas{
  width:100%;
  max-width:420px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.15);
  background:black;
}

.list{
  list-style:none;
  padding:0;
  margin:10px 0 0;
}

.item{
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px;
  background:rgba(0,0,0,0.2);
  margin-bottom:8px;
}

.item b{display:block;font-size:14px;}
.item small{color:var(--muted);}

.hint{
  text-align:center;
  font-size:13px;
  color:var(--muted);
  margin-top:6px;
}

/* Welcome overlay */
#welcomeOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.7);
  backdrop-filter:blur(10px);
  z-index:9999;
  display:none;
  padding:16px;
}

#welcomeBox{
  max-width:700px;
  margin:8vh auto;
  background:rgba(20,12,35,0.9);
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
}

#welcomeBox h2{
  margin:0 0 6px;
  font-size:18px;
}

#welcomeBox p{
  font-size:14px;
  color:var(--muted);
  line-height:1.4;
}

#welcomeBox ol{
  margin:8px 0 12px;
  padding-left:18px;
  font-size:14px;
}
</style>
</head>
<body>

<div class="wrap">
  <h1>Daily Sigil Planner</h1>
  <div class="sub">Write your plans, generate a schedule, then create a decorative sigil wallpaper for your phone.</div>

  <div class="grid">

    <div class="card">
      <label>Today label</label>
      <input id="dayLabel" placeholder="Example Friday intentions">

      <label>Plans for today</label>
      <textarea id="plans" placeholder="One task per line
Clean kitchen
30 minute walk
Finish listing photos
Call doctor"></textarea>

      <div class="row">
        <div>
          <label>Start time</label>
          <input type="time" id="startTime" value="09:00">
        </div>
        <div>
          <label>Minutes per task</label>
          <select id="minutesPer">
            <option value="30">30</option>
            <option value="45">45</option>
            <option value="60" selected>60</option>
            <option value="90">90</option>
          </select>
        </div>
      </div>

      <label>Sigil density</label>
      <select id="density">
        <option value="low">Low</option>
        <option value="med" selected>Medium</option>
        <option value="high">High</option>
      </select>

      <div class="btns">
        <button class="primary" id="makeAll">Make schedule and wallpaper</button>
        <button id="saveImage">Save wallpaper image</button>
      </div>
    </div>

    <div class="card">
      <canvas id="wall" width="1170" height="2532"></canvas>
      <div class="hint">Tall phone format. Screenshot or save.</div>

      <label>Generated schedule</label>
      <ul class="list" id="scheduleList"></ul>
    </div>

  </div>
</div>

<div id="welcomeOverlay">
  <div id="welcomeBox">
    <h2 id="welcomeTitle">Your sigil for today</h2>
    <p id="welcomeSaying">This sigil is a quiet contract with yourself. Set it. See it. Follow it.</p>

    <div class="sub">How it works</div>
    <ol>
      <li>Write your plans, one per line</li>
      <li>Tap Make schedule and wallpaper</li>
      <li>Save or screenshot the image</li>
      <li>Set it as your phone wallpaper</li>
    </ol>

    <label>Edit your daily saying</label>
    <textarea id="sayingInput"></textarea>

    <div class="btns">
      <button id="saveSaying">Save saying</button>
      <button id="resetSaying">Reset</button>
      <button class="primary" id="closeWelcome">Begin</button>
    </div>
  </div>
</div>

<script>
const DEFAULT_SAYING="This sigil is a quiet contract with yourself. Set it. See it. Follow it.";

function todayKey(){
  const d=new Date();
  return d.getFullYear()+""+(d.getMonth()+1)+""+d.getDate();
}

function getSaying(){
  return localStorage.getItem("daily_sigil_saying")||DEFAULT_SAYING;
}

function setSaying(t){
  localStorage.setItem("daily_sigil_saying",t.trim()||DEFAULT_SAYING);
}

function shouldShowWelcome(){
  return localStorage.getItem("welcome_seen_"+todayKey())!=="yes";
}

function markWelcomeSeen(){
  localStorage.setItem("welcome_seen_"+todayKey(),"yes");
}

const elPlans=document.getElementById("plans");
const elDayLabel=document.getElementById("dayLabel");
const elStart=document.getElementById("startTime");
const elMinutes=document.getElementById("minutesPer");
const elDensity=document.getElementById("density");
const elSchedule=document.getElementById("scheduleList");
const canvas=document.getElementById("wall");
const ctx=canvas.getContext("2d");

const overlay=document.getElementById("welcomeOverlay");
const welcomeTitle=document.getElementById("welcomeTitle");
const welcomeSaying=document.getElementById("welcomeSaying");
const sayingInput=document.getElementById("sayingInput");

document.getElementById("closeWelcome").onclick=()=>{
  markWelcomeSeen();
  overlay.style.display="none";
};

document.getElementById("saveSaying").onclick=()=>{
  setSaying(sayingInput.value);
  welcomeSaying.textContent=getSaying();
};

document.getElementById("resetSaying").onclick=()=>{
  setSaying(DEFAULT_SAYING);
  sayingInput.value=DEFAULT_SAYING;
  welcomeSaying.textContent=DEFAULT_SAYING;
};

function openWelcome(){
  welcomeTitle.textContent=elDayLabel.value||"Your sigil for today";
  welcomeSaying.textContent=getSaying();
  sayingInput.value=getSaying();
  overlay.style.display="block";
}

if(shouldShowWelcome()){
  setTimeout(openWelcome,300);
}

function parseTasks(){
  return elPlans.value.split("\n").map(t=>t.trim()).filter(t=>t);
}

function makeSchedule(){
  elSchedule.innerHTML="";
  const tasks=parseTasks();
  let [h,m]=elStart.value.split(":").map(Number);
  const dur=parseInt(elMinutes.value);

  tasks.forEach(t=>{
    const start=`${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}`;
    m+=dur;
    while(m>=60){m-=60;h++;}
    const end=`${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}`;

    const li=document.createElement("li");
    li.className="item";
    li.innerHTML=`<b>${t}</b><small>${start} to ${end}</small>`;
    elSchedule.appendChild(li);
  });
}

function drawSigil(){
  const w=canvas.width;
  const h=canvas.height;
  ctx.clearRect(0,0,w,h);

  const grad=ctx.createLinearGradient(0,0,0,h);
  grad.addColorStop(0,"#12091f");
  grad.addColorStop(1,"#000000");
  ctx.fillStyle=grad;
  ctx.fillRect(0,0,w,h);

  const density=elDensity.value==="high"?80:elDensity.value==="low"?25:45;
  ctx.strokeStyle="rgba(183,156,255,0.35)";
  ctx.lineWidth=3;

  for(let i=0;i<density;i++){
    ctx.beginPath();
    ctx.moveTo(Math.random()*w,Math.random()*h);
    ctx.lineTo(Math.random()*w,Math.random()*h);
    ctx.stroke();
  }

  ctx.fillStyle="rgba(255,255,255,0.9)";
  ctx.textAlign="center";
  ctx.font="bold 70px serif";
  ctx.fillText(elDayLabel.value||"Daily Sigil",w/2,180);

  ctx.font="40px serif";
  ctx.fillText(getSaying(),w/2,h-200);
}

document.getElementById("makeAll").onclick=()=>{
  makeSchedule();
  drawSigil();
};

document.getElementById("saveImage").onclick=()=>{
  const link=document.createElement("a");
  link.download="daily_sigil.png";
  link.href=canvas.toDataURL("image/png");
  link.click();
};
</script>

</body>
</html>
